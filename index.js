const TelegramApi = require('node-telegram-bot-api')
const { gameOptions, againOptions } = require('./options')
const axios = require('axios');
const sequelize = require('./db');
const UserModel = require('./models')
const token = '8141777064:AAEDCEeg4j-fX_nkk5osPZ59Ptm9HeP0qNQ'
const bot = new TelegramApi(token, { polling: true })
const API_URL = 'https://cbu.uz/ru/arkhiv-kursov-valyut/json/';

const chats = {}
const wishes = [
    "–¢—ã —Å—Ç–∞–Ω–µ—à—å —É–ª—ã–±–∞—Ç—å—Å—è —á–∞—â–µ –∏ –∏—Å–∫—Ä–µ–Ω–Ω–µ–µ.",
    "–í—Å–µ —Ç–≤–æ–∏ –ø–ª–∞–Ω—ã –±—É–¥—É—Ç —É–≤–µ—Ä–µ–Ω–Ω–æ –¥–≤–∏–≥–∞—Ç—å—Å—è –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏.",
    "–¢—ã –Ω–∞–π–¥–µ—à—å –ø–æ–¥—Ö–æ–¥ –¥–∞–∂–µ –∫ —Å–∞–º—ã–º —Å–ª–æ–∂–Ω—ã–º –∑–∞–¥–∞—á–∞–º.",
    "–õ—é–±–∏–º—ã–µ –ª—é–¥–∏ –≤—Å–µ–≥–¥–∞ –±—É–¥—É—Ç –≥–æ—Ç–æ–≤—ã —Ç–µ–±—è –ø–æ–¥–¥–µ—Ä–∂–∞—Ç—å.",
    "–¢–≤–æ—è –∂–∏–∑–Ω—å –Ω–∞–ø–æ–ª–Ω–∏—Ç—Å—è —Ä–∞–¥–æ—Å—Ç—å—é –∏ –≥–∞—Ä–º–æ–Ω–∏–µ–π.",
    "–ö–∞–∂–¥—ã–π –¥–µ–Ω—å –±—É–¥–µ—Ç –ø—Ä–∏–Ω–æ—Å–∏—Ç—å –Ω–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏.",
    "–¢–≤–æ–∏ –º–µ—á—Ç—ã –Ω–∞—á–Ω—É—Ç –≤–æ–ø–ª–æ—â–∞—Ç—å—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ—Å—Ç—å.",
    "–¢—ã –±—É–¥–µ—à—å –æ–∫—Ä—É–∂–µ–Ω(–∞) —Ç–æ–ª—å–∫–æ –∏—Å–∫—Ä–µ–Ω–Ω–∏–º–∏ –ª—é–¥—å–º–∏.",
    "–í—Å—ë, –∑–∞ —á—Ç–æ —Ç—ã –≤–æ–∑—å–º–µ—à—å—Å—è, –±—É–¥–µ—Ç –ø—Ä–∏–Ω–æ—Å–∏—Ç—å —É—Å–ø–µ—Ö.",
    "–¢–≤–æ–∏ —É—Å–∏–ª–∏—è –≤—Å–µ–≥–¥–∞ –±—É–¥—É—Ç –¥–æ—Å—Ç–æ–π–Ω–æ –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω—ã.",
    "–¢—ã –≤—Å–µ–≥–¥–∞ –±—É–¥–µ—à—å –Ω–∞—Ö–æ–¥–∏—Ç—å –≤–µ—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è.",
    "–ö–∞–∂–¥—ã–π —Ç–≤–æ–π –¥–µ–Ω—å –±—É–¥–µ—Ç –Ω–∞–ø–æ–ª–Ω–µ–Ω —Å—á–∞—Å—Ç—å–µ–º.",
    "–¢–≤–æ–∏ –∏–¥–µ–∏ –≤–¥–æ—Ö–Ω–æ–≤—è—Ç –æ–∫—Ä—É–∂–∞—é—â–∏—Ö.",
    "–£ —Ç–µ–±—è –ø–æ—è–≤–∏—Ç—Å—è —ç–Ω–µ—Ä–≥–∏—è –¥–ª—è –Ω–æ–≤—ã—Ö —Å–≤–µ—Ä—à–µ–Ω–∏–π.",
    "–¢—ã –±—É–¥–µ—à—å –≥–æ—Ä–¥–∏—Ç—å—Å—è —Å–≤–æ–∏–º–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è–º–∏.",
    "–¢–≤–æ–∏ –±–ª–∏–∑–∫–∏–µ –±—É–¥—É—Ç —Å—á–∞—Å—Ç–ª–∏–≤—ã —Ä—è–¥–æ–º —Å —Ç–æ–±–æ–π.",
    "–õ—é–±–æ–≤—å –±—É–¥–µ—Ç —Å–æ–ø—Ä–æ–≤–æ–∂–¥–∞—Ç—å —Ç–µ–±—è –≤–æ –≤—Å–µ—Ö –Ω–∞—á–∏–Ω–∞–Ω–∏—è—Ö.",
    "–¢–≤–æ–∏ —Ç—Ä—É–¥—ã –ø—Ä–∏–Ω–µ—Å—É—Ç –¥–æ—Å—Ç–æ–π–Ω—ã–µ –ø–ª–æ–¥—ã.",
    "–¢–≤–æ—è –≤–µ—Ä–∞ –≤ —Å–µ–±—è –±—É–¥–µ—Ç —Ç–æ–ª—å–∫–æ –∫—Ä–µ–ø–Ω—É—Ç—å.",
    "–í—Å–µ –∏—Å–ø—ã—Ç–∞–Ω–∏—è —Å–¥–µ–ª–∞—é—Ç —Ç–µ–±—è —Å–∏–ª—å–Ω–µ–µ.",
    "–¢—ã –Ω–∞–π–¥–µ—à—å –≤—Ä–µ–º—è –¥–ª—è —Å–≤–æ–∏—Ö —Ö–æ–±–±–∏ –∏ —É–≤–ª–µ—á–µ–Ω–∏–π.",
    "–¢–≤–æ–∏ —Ñ–∏–Ω–∞–Ω—Å—ã –±—É–¥—É—Ç –≤—Å–µ–≥–¥–∞ –≤ –ø–æ—Ä—è–¥–∫–µ.",
    "–¢—ã –±—É–¥–µ—à—å —Ä–∞–¥–æ–≤–∞—Ç—å—Å—è –∫–∞–∂–¥–æ–º—É –º–æ–º–µ–Ω—Ç—É –∂–∏–∑–Ω–∏.",
    "–£–¥–∞—á–∞ –±—É–¥–µ—Ç –∏–¥—Ç–∏ —Ä—è–¥–æ–º —Å —Ç–æ–±–æ–π.",
    "–¢—ã –≤—Å–µ–≥–¥–∞ –±—É–¥–µ—à—å –Ω–∞—Ö–æ–¥–∏—Ç—å –Ω—É–∂–Ω—ã–µ —Å–ª–æ–≤–∞.",
    "–¢–≤–æ–µ –∑–¥–æ—Ä–æ–≤—å–µ —Å—Ç–∞–Ω–µ—Ç –∫—Ä–µ–ø—á–µ —Å –∫–∞–∂–¥—ã–º –¥–Ω–µ–º.",
    "–¢—ã –≤—Å—Ç—Ä–µ—Ç–∏—à—å –ª—é–¥–µ–π, –∫–æ—Ç–æ—Ä—ã–µ –∏–∑–º–µ–Ω—è—Ç —Ç–≤–æ—é –∂–∏–∑–Ω—å –∫ –ª—É—á—à–µ–º—É.",
    "–í—Å–µ —Ç–≤–æ–∏ —Ü–µ–ª–∏ –±—É–¥—É—Ç –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ –¥–æ—Å—Ç–∏–≥–Ω—É—Ç—ã.",
    "–¢–≤–æ–∏ –∏–¥–µ–∏ –Ω–∞–π–¥—É—Ç –ø–æ–¥–¥–µ—Ä–∂–∫—É –∏ –ø—Ä–∏–∑–Ω–∞–Ω–∏–µ.",
    "–¢—ã –±—É–¥–µ—à—å —á—É–≤—Å—Ç–≤–æ–≤–∞—Ç—å —Å–µ–±—è —É–≤–µ—Ä–µ–Ω–Ω–æ –≤ –ª—é–±–æ–π —Å–∏—Ç—É–∞—Ü–∏–∏.",
    "–¢–≤–æ–∏ —Å—Ç–∞—Ä–∞–Ω–∏—è –±—É–¥—É—Ç –æ—Ü–µ–Ω–µ–Ω—ã –ø–æ –¥–æ—Å—Ç–æ–∏–Ω—Å—Ç–≤—É.",
    "–¢—ã –±—É–¥–µ—à—å –≤–¥–æ—Ö–Ω–æ–≤–ª—è—Ç—å –∏ –º–æ—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –¥—Ä—É–≥–∏—Ö.",
    "–¢–µ–±—è –∂–¥—É—Ç —É–¥–∏–≤–∏—Ç–µ–ª—å–Ω—ã–µ –æ—Ç–∫—Ä—ã—Ç–∏—è –∏ –≤–ø–µ—á–∞—Ç–ª–µ–Ω–∏—è.",
    "–ö–∞–∂–¥–æ–µ —É—Ç—Ä–æ –±—É–¥–µ—Ç –ø—Ä–∏–Ω–æ—Å–∏—Ç—å –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏–µ.",
    "–¢—ã –±—É–¥–µ—à—å –≤—Å–µ–≥–¥–∞ –≤ –Ω—É–∂–Ω–æ–µ –≤—Ä–µ–º—è –≤ –Ω—É–∂–Ω–æ–º –º–µ—Å—Ç–µ.",
    "–¢–≤–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ —Å—Ç–∞–Ω–µ—Ç –µ—â–µ –±–æ–ª–µ–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–∏–º.",
    "–¢—ã –Ω–∞–π–¥–µ—à—å —Å–∏–ª—ã –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–∞–º—ã—Ö —Å–º–µ–ª—ã—Ö –ø–ª–∞–Ω–æ–≤.",
    "–¢–≤–æ—è –∂–∏–∑–Ω—å –±—É–¥–µ—Ç –Ω–∞–ø–æ–ª–Ω–µ–Ω–∞ —Å–≤–µ—Ç–ª—ã–º–∏ –º–æ–º–µ–Ω—Ç–∞–º–∏.",
    "–¢—ã –ø–æ–ª—É—á–∏—à—å —Ç–æ, –æ —á–µ–º –¥–∞–≤–Ω–æ –º–µ—á—Ç–∞–ª(–∞).",
    "–¢—ã –Ω–∞—É—á–∏—à—å—Å—è —Ü–µ–Ω–∏—Ç—å –∫–∞–∂–¥—É—é –º–µ–ª–æ—á—å –≤ –∂–∏–∑–Ω–∏.",
    "–¢–≤–æ–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –±—É–¥—É—Ç —Ç–æ–ª—å–∫–æ —Ä–∞—Å—Ç–∏.",
    "–¢—ã –≤—Å—Ç—Ä–µ—Ç–∏—à—å –ª—é–¥–µ–π, –∫–æ—Ç–æ—Ä—ã–µ —Å—Ç–∞–Ω—É—Ç —Ç–≤–æ–∏–º–∏ –¥—Ä—É–∑—å—è–º–∏ –Ω–∞ –≤—Å—é –∂–∏–∑–Ω—å.",
    "–¢—ã –±—É–¥–µ—à—å –≥–æ—Ä–¥–∏—Ç—å—Å—è —Å–≤–æ–∏–º–∏ —É—Å–ø–µ—Ö–∞–º–∏.",
    "–¢—ã –Ω–∞–π–¥–µ—à—å –±–∞–ª–∞–Ω—Å –º–µ–∂–¥—É —Ä–∞–±–æ—Ç–æ–π –∏ –æ—Ç–¥—ã—Ö–æ–º.",
    "–¢–≤–æ—è –∏–Ω—Ç—É–∏—Ü–∏—è —Å—Ç–∞–Ω–µ—Ç —Ç–≤–æ–∏–º –≤–µ—Ä–Ω—ã–º –ø–æ–º–æ—â–Ω–∏–∫–æ–º.",
    "–¢–≤–æ–∏ —Å—Ç–∞—Ä–∞–Ω–∏—è –±—É–¥—É—Ç –∑–∞–º–µ—á–µ–Ω—ã –∏ –æ—Ü–µ–Ω–µ–Ω—ã.",
    "–¢—ã –æ—Ç–∫—Ä–æ–µ—à—å –¥–ª—è —Å–µ–±—è —á—Ç–æ-—Ç–æ —Å–æ–≤–µ—Ä—à–µ–Ω–Ω–æ –Ω–æ–≤–æ–µ.",
    "–¢—ã –±—É–¥–µ—à—å –Ω–∞—Å–ª–∞–∂–¥–∞—Ç—å—Å—è –∫–∞–∂–¥—ã–º –¥–Ω–µ–º —Å–≤–æ–µ–π –∂–∏–∑–Ω–∏.",
    "–¢—ã —Å—Ç–∞–Ω–µ—à—å –±–æ–ª–µ–µ —É–≤–µ—Ä–µ–Ω–Ω—ã–º(–æ–π) –≤ —Å–≤–æ–∏—Ö —Å–∏–ª–∞—Ö.",
    "–¢–≤–æ—è –∂–∏–∑–Ω—å —Å—Ç–∞–Ω–µ—Ç —è—Ä—á–µ –∏ –Ω–∞—Å—ã—â–µ–Ω–Ω–µ–µ.",
    "–¢—ã –±—É–¥–µ—à—å –Ω–∞—Ö–æ–¥–∏—Ç—å —Ä–∞–¥–æ—Å—Ç—å –¥–∞–∂–µ –≤ –º–µ–ª–æ—á–∞—Ö.",
    "–¢—ã –±—É–¥–µ—à—å –≥–æ—Ä–¥–∏—Ç—å—Å—è —Å–æ–±–æ–π –∑–∞ —Å–≤–æ–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è.",
    "–¢—ã –±—É–¥–µ—à—å –æ–∫—Ä—É–∂–µ–Ω(–∞) —Ç–µ–ø–ª–æ—Ç–æ–π –∏ –∑–∞–±–æ—Ç–æ–π.",
    "–¢–≤–æ–∏ –º–µ—á—Ç—ã –±—É–¥—É—Ç –≤—Å–µ–≥–¥–∞ –≤–µ—Å—Ç–∏ —Ç–µ–±—è –≤–ø–µ—Ä–µ–¥.",
    "–¢—ã –Ω–∞–π–¥–µ—à—å —Å–ø–æ—Å–æ–± —Å–¥–µ–ª–∞—Ç—å —Å–≤–æ—é –∂–∏–∑–Ω—å –µ—â–µ –ª—É—á—à–µ.",
    "–¢–≤–æ–µ —Ç–µ—Ä–ø–µ–Ω–∏–µ –±—É–¥–µ—Ç –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–æ.",
    "–¢—ã –±—É–¥–µ—à—å —á—É–≤—Å—Ç–≤–æ–≤–∞—Ç—å —Å–µ–±—è —Å—á–∞—Å—Ç–ª–∏–≤—ã–º –∏ –¥–æ–≤–æ–ª—å–Ω—ã–º.",
    "–¢—ã –ø–æ–ª—É—á–∏—à—å –ø—Ä–∏–∑–Ω–∞–Ω–∏–µ –∑–∞ —Å–≤–æ–∏ —Ç—Ä—É–¥—ã.",
    "–¢–≤–æ—è –∂–∏–∑–Ω—å –Ω–∞–ø–æ–ª–Ω–∏—Ç—Å—è –ø—Ä–µ–∫—Ä–∞—Å–Ω—ã–º–∏ –º–æ–º–µ–Ω—Ç–∞–º–∏.",
    "–¢—ã –±—É–¥–µ—à—å —É—Å–ø–µ—à–µ–Ω(—É—Å–ø–µ—à–Ω–∞) –≤–æ –≤—Å–µ—Ö –Ω–∞—á–∏–Ω–∞–Ω–∏—è—Ö.",
    "–¢–≤–æ—è –∂–∏–∑–Ω—å —Å—Ç–∞–Ω–µ—Ç –±–æ–ª–µ–µ –Ω–∞—Å—ã—â–µ–Ω–Ω–æ–π –∏ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ–π.",
    "–¢—ã –Ω–∞–π–¥–µ—à—å —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è –ª—é–±–æ–π –ø—Ä–æ–±–ª–µ–º—ã.",
    "–¢—ã –æ—Ç–∫—Ä–æ–µ—à—å –≤ —Å–µ–±–µ –Ω–æ–≤—ã–µ —Ç–∞–ª–∞–Ω—Ç—ã.",
    "–¢—ã –±—É–¥–µ—à—å –≤–¥–æ—Ö–Ω–æ–≤–ª—è—Ç—å—Å—è —Ç–µ–º, —á—Ç–æ –¥–µ–ª–∞–µ—à—å.",
    "–¢—ã —Å—Ç–∞–Ω–µ—à—å –ø—Ä–∏–º–µ—Ä–æ–º –¥–ª—è –¥—Ä—É–≥–∏—Ö.",
    "–¢—ã –±—É–¥–µ—à—å –Ω–∞—Ö–æ–¥–∏—Ç—å —Ä–∞–¥–æ—Å—Ç—å –≤ –ø—Ä–æ—Å—Ç—ã—Ö –≤–µ—â–∞—Ö.",
    "–¢–≤–æ–∏ –±–ª–∏–∑–∫–∏–µ –±—É–¥—É—Ç —Å—á–∞—Å—Ç–ª–∏–≤—ã —Ä—è–¥–æ–º —Å —Ç–æ–±–æ–π.",
    "–¢—ã –Ω–∞—É—á–∏—à—å—Å—è –Ω–∞—Å–ª–∞–∂–¥–∞—Ç—å—Å—è –∫–∞–∂–¥—ã–º –¥–Ω–µ–º.",
    "–¢—ã –±—É–¥–µ—à—å —É–≤–µ—Ä–µ–Ω(–∞), —á—Ç–æ –¥–µ–ª–∞–µ—à—å –≤—Å–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ.",
    "–¢–≤–æ—è –∂–∏–∑–Ω—å –±—É–¥–µ—Ç –ø–æ–ª–Ω–∞ —É–¥–∏–≤–∏—Ç–µ–ª—å–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π.",
    "–¢—ã –≤—Å–µ–≥–¥–∞ –±—É–¥–µ—à—å –¥–≤–∏–≥–∞—Ç—å—Å—è —Ç–æ–ª—å–∫–æ –≤–ø–µ—Ä–µ–¥.",
    "–¢—ã –Ω–∞–π–¥–µ—à—å –≤—Ä–µ–º—è –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ —Ç–µ–±–µ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –≤–∞–∂–Ω–æ.",
    "–¢—ã –±—É–¥–µ—à—å –ø–æ–ª—É—á–∞—Ç—å —Ä–∞–¥–æ—Å—Ç—å –æ—Ç –∫–∞–∂–¥–æ–≥–æ –º–≥–Ω–æ–≤–µ–Ω–∏—è.",
    "–¢—ã –±—É–¥–µ—à—å –æ–∫—Ä—É–∂–µ–Ω(–∞) –≤–¥–æ—Ö–Ω–æ–≤–ª—è—é—â–∏–º–∏ –ª—é–¥—å–º–∏.",
    "–¢—ã —Å–º–æ–∂–µ—à—å –ø—Ä–µ–æ–¥–æ–ª–µ—Ç—å –ª—é–±—ã–µ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è.",
    "–¢—ã –≤—Å–µ–≥–¥–∞ –±—É–¥–µ—à—å –Ω–∞—Ö–æ–¥–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ.",
    "–¢—ã –Ω–∞—É—á–∏—à—å—Å—è –≤–∏–¥–µ—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –¥–∞–∂–µ –≤ —Å–ª–æ–∂–Ω—ã—Ö —Å–∏—Ç—É–∞—Ü–∏—è—Ö.",
    "–¢–≤–æ–∏ –º–µ—á—Ç—ã –±—É–¥—É—Ç —Ç–æ–ª—å–∫–æ —É–≤–µ–ª–∏—á–∏–≤–∞—Ç—å —Ç–≤–æ—é —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å.",
    "–¢—ã –ø–æ–ª—É—á–∏—à—å —Ç–æ, —á–µ–≥–æ —Ç–∞–∫ –¥–æ–ª–≥–æ –∂–¥–∞–ª(–∞).",
    "–¢–≤–æ—è –∂–∏–∑–Ω—å —Å—Ç–∞–Ω–µ—Ç –µ—â–µ –±–æ–ª–µ–µ —è—Ä–∫–æ–π –∏ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ–π.",
    "–¢—ã –≤—Å–µ–≥–¥–∞ –±—É–¥–µ—à—å –Ω–∞—Ö–æ–¥–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É —É —Å–≤–æ–∏—Ö –±–ª–∏–∑–∫–∏—Ö.",
    "–¢–≤–æ–∏ —É—Å–∏–ª–∏—è –±—É–¥—É—Ç –ø—Ä–∏–Ω–æ—Å–∏—Ç—å –ø–ª–æ–¥—ã.",
    "–¢—ã –ø–æ—á—É–≤—Å—Ç–≤—É–µ—à—å, —á—Ç–æ —Ç—ã –Ω–∞ –≤–µ—Ä–Ω–æ–º –ø—É—Ç–∏.",
    "–¢—ã –±—É–¥–µ—à—å –Ω–∞—Å–ª–∞–∂–¥–∞—Ç—å—Å—è –∫–∞–∂–¥—ã–º –º–≥–Ω–æ–≤–µ–Ω–∏–µ–º –∂–∏–∑–Ω–∏.",
    "–¢–≤–æ–∏ —Ü–µ–ª–∏ —Å—Ç–∞–Ω—É—Ç –µ—â–µ –±–ª–∏–∂–µ –∫ –æ—Å—É—â–µ—Å—Ç–≤–ª–µ–Ω–∏—é.",
    "–¢—ã –±—É–¥–µ—à—å —Ä–∞–¥–æ–≤–∞—Ç—å—Å—è —Å–≤–æ–∏–º —É—Å–ø–µ—Ö–∞–º.",
    "–¢—ã –≤—Å–µ–≥–¥–∞ –±—É–¥–µ—à—å –Ω–∞—Ö–æ–¥–∏—Ç—å –ø–æ–∑–∏—Ç–∏–≤ –¥–∞–∂–µ –≤ —Ç—Ä—É–¥–Ω—ã—Ö —Å–∏—Ç—É–∞—Ü–∏—è—Ö.",
    "–¢—ã –±—É–¥–µ—à—å –≤–¥–æ—Ö–Ω–æ–≤–ª—è—Ç—å –æ–∫—Ä—É–∂–∞—é—â–∏—Ö —Å–≤–æ–∏–º –ø—Ä–∏–º–µ—Ä–æ–º.",
    "–¢–≤–æ–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –±—É–¥—É—Ç —Ç–æ–ª—å–∫–æ —Ä–∞—Å—Ç–∏.",
    "–¢–≤–æ–∏ —Ç—Ä—É–¥—ã –ø—Ä–∏–Ω–µ—Å—É—Ç —Ç–µ–±–µ –∑–∞—Å–ª—É–∂–µ–Ω–Ω–æ–µ –ø—Ä–∏–∑–Ω–∞–Ω–∏–µ.",
    "–¢–≤–æ—è –∂–∏–∑–Ω—å –±—É–¥–µ—Ç –Ω–∞–ø–æ–ª–Ω–µ–Ω–∞ —Ç–æ–ª—å–∫–æ —Ä–∞–¥–æ—Å—Ç—å—é –∏ —Å–≤–µ—Ç–æ–º.",
    "–¢—ã –±—É–¥–µ—à—å –Ω–∞—Ö–æ–¥–∏—Ç—å —Ä–∞–¥–æ—Å—Ç—å –¥–∞–∂–µ –≤ –æ–±—ã–¥–µ–Ω–Ω—ã—Ö –¥–µ–ª–∞—Ö."
];
const rules = [
    "–ù–µ –±–æ–π—Å—è –Ω–∞—á–∏–Ω–∞—Ç—å —Å–Ω–∞—á–∞–ª–∞, –µ—Å–ª–∏ —á—É–≤—Å—Ç–≤—É–µ—à—å, —á—Ç–æ —ç—Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ.",
    "–°—Ç–∞–≤—å –ø–µ—Ä–µ–¥ —Å–æ–±–æ–π —Ä–µ–∞–ª—å–Ω—ã–µ –∏ –¥–æ—Å—Ç–∏–∂–∏–º—ã–µ —Ü–µ–ª–∏.",
    "–í—Å–µ–≥–¥–∞ —É—á–∏—Å—å –Ω–∞ —Å–≤–æ–∏—Ö –æ—à–∏–±–∫–∞—Ö.",
    "–î–æ—Ä–æ–∂–∏ –≤—Ä–µ–º–µ–Ω–µ–º, –æ–Ω–æ –Ω–µ–≤–æ—Å–ø–æ–ª–Ω–∏–º–æ.",
    "–ë—É–¥—å –±–ª–∞–≥–æ–¥–∞—Ä–µ–Ω –∑–∞ –∫–∞–∂–¥–æ–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ, –∫–∞–∫–∏–º –±—ã –º–∞–ª–µ–Ω—å–∫–∏–º –æ–Ω–æ –Ω–∏ –±—ã–ª–æ.",
    "–°–ª—É—à–∞–π –¥—Ä—É–≥–∏—Ö, –Ω–æ –ø—Ä–∏–Ω–∏–º–∞–π —Ä–µ—à–µ–Ω–∏—è —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ.",
    "–ö–∞–∂–¥—ã–π –¥–µ–Ω—å –Ω–∞—Ö–æ–¥–∏ –≤—Ä–µ–º—è –¥–ª—è —Å–µ–±—è.",
    "–£–≤–∞–∂–∞–π —á—É–∂–∏–µ –≥—Ä–∞–Ω–∏—Ü—ã –∏ —Å–≤–æ–∏ —Ç–æ–∂–µ.",
    "–ù–µ –æ—Ç–∫–ª–∞–¥—ã–≤–∞–π –¥–µ–ª–∞ –Ω–∞ –ø–æ—Ç–æ–º.",
    "–†–∞–±–æ—Ç–∞–π –Ω–∞–¥ —Å–≤–æ–µ–π –¥–∏—Å—Ü–∏–ø–ª–∏–Ω–æ–π –µ–∂–µ–¥–Ω–µ–≤–Ω–æ.",
    "–ù–µ —Å—Ä–∞–≤–Ω–∏–≤–∞–π —Å–µ–±—è —Å –¥—Ä—É–≥–∏–º–∏, —Ç–æ–ª—å–∫–æ —Å —Å–æ–±–æ–π –≤—á–µ—Ä–∞—à–Ω–∏–º.",
    "–ù–µ –±–æ–π—Å—è —Å–ø—Ä–∞—à–∏–≤–∞—Ç—å, –µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ–ø–æ–Ω—è—Ç–Ω–æ.",
    "–î–µ–ª–∞–π —Ç–æ, —á—Ç–æ –ø—Ä–∏–Ω–æ—Å–∏—Ç —Ä–∞–¥–æ—Å—Ç—å –∏ —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–µ–Ω–∏–µ.",
    "–û—Ü–µ–Ω–∏–≤–∞–π —Å–≤–æ–∏ –ø–æ—Å—Ç—É–ø–∫–∏ —Å —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è –∏—Ö –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏–π.",
    "–°–æ—Ö—Ä–∞–Ω—è–π –ø–æ–∑–∏—Ç–∏–≤–Ω—ã–π –Ω–∞—Å—Ç—Ä–æ–π –≤ —Å–ª–æ–∂–Ω—ã—Ö —Å–∏—Ç—É–∞—Ü–∏—è—Ö.",
    "–°—Ç–∞–≤—å –ø–µ—Ä–µ–¥ —Å–æ–±–æ–π —Ü–µ–ª–∏, –∫–æ—Ç–æ—Ä—ã–µ —Ç–µ–±—è –≤–¥–æ—Ö–Ω–æ–≤–ª—è—é—Ç.",
    "–ó–∞–±–æ—Ç—å—Å—è –æ —Å–≤–æ–µ–º –∑–¥–æ—Ä–æ–≤—å–µ ‚Äî —Ñ–∏–∑–∏—á–µ—Å–∫–æ–º –∏ –º–µ–Ω—Ç–∞–ª—å–Ω–æ–º.",
    "–ë—É–¥—å —á–µ—Å—Ç–Ω—ã–º —Å —Å–æ–±–æ–π –∏ –¥—Ä—É–≥–∏–º–∏.",
    "–ù–µ –±–æ–π—Å—è –º–µ–Ω—è—Ç—å —Å–≤–æ–µ –º–Ω–µ–Ω–∏–µ, –µ—Å–ª–∏ –ø–æ–ª—É—á–∏–ª –Ω–æ–≤—ã–µ –∑–Ω–∞–Ω–∏—è.",
    "–û–∫—Ä—É–∂–∞–π —Å–µ–±—è –ª—é–¥—å–º–∏, –∫–æ—Ç–æ—Ä—ã–µ —Ç–µ–±—è –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç.",
    "–ò–∑–±–µ–≥–∞–π –Ω–µ–≥–∞—Ç–∏–≤–Ω–æ–≥–æ –≤–ª–∏—è–Ω–∏—è –∏ —Ç–æ–∫—Å–∏—á–Ω—ã—Ö –ª—é–¥–µ–π.",
    "–í—Å–µ–≥–¥–∞ —Å—Ç—Ä–µ–º–∏—Å—å –∫ —Ä–∞–∑–≤–∏—Ç–∏—é –∏ –Ω–æ–≤—ã–º –∑–Ω–∞–Ω–∏—è–º.",
    "–ù–µ –∑–∞—Ü–∏–∫–ª–∏–≤–∞–π—Å—è –Ω–∞ –ø—Ä–æ—à–ª–æ–º ‚Äî –∂–∏–≤–∏ –Ω–∞—Å—Ç–æ—è—â–∏–º.",
    "–ò–∑–≤–ª–µ–∫–∞–π —É—Ä–æ–∫–∏ –∏–∑ –∫–∞–∂–¥–æ–π —Å–∏—Ç—É–∞—Ü–∏–∏.",
    "–ù–∞—Ö–æ–¥–∏ –≤—Ä–µ–º—è –¥–ª—è –æ—Ç–¥—ã—Ö–∞ –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è.",
    "–ù–µ –±–æ–π—Å—è –≤—ã—Ä–∞–∂–∞—Ç—å —Å–≤–æ–∏ —á—É–≤—Å—Ç–≤–∞.",
    "–ü–ª–∞–Ω–∏—Ä—É–π —Å–≤–æ–π –¥–µ–Ω—å, —á—Ç–æ–±—ã –±—ã—Ç—å –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ã–º.",
    "–î–æ–≤–µ—Ä—è–π —Å–≤–æ–∏–º –∏–Ω—Å—Ç–∏–Ω–∫—Ç–∞–º, –Ω–æ –ø—Ä–æ–≤–µ—Ä—è–π —Ñ–∞–∫—Ç—ã.",
    "–ë—É–¥—å —Ç–µ—Ä–ø–µ–ª–∏–≤ –∫ —Å–µ–±–µ –∏ –¥—Ä—É–≥–∏–º.",
    "–ù–µ –∑–∞–±—ã–≤–∞–π –æ —Å–≤–æ–∏—Ö —Ö–æ–±–±–∏ –∏ —É–≤–ª–µ—á–µ–Ω–∏—è—Ö.",
    "–ü–æ–º–æ–≥–∞–π –¥—Ä—É–≥–∏–º, –µ—Å–ª–∏ –º–æ–∂–µ—à—å —ç—Ç–æ —Å–¥–µ–ª–∞—Ç—å.",
    "–ë—É–¥—å –≤–µ—Ä–µ–Ω —Å–≤–æ–∏–º –ø—Ä–∏–Ω—Ü–∏–ø–∞–º.",
    "–£—á–∏—Å—å –Ω–∞—Ö–æ–¥–∏—Ç—å —Ä–∞–¥–æ—Å—Ç—å –≤ –º–µ–ª–æ—á–∞—Ö.",
    "–ü—ã—Ç–∞–π—Å—è –≤–∏–¥–µ—Ç—å —Ö–æ—Ä–æ—à–µ–µ –≤ –∫–∞–∂–¥–æ–º —á–µ–ª–æ–≤–µ–∫–µ.",
    "–†–∞–∑–≤–∏–≤–∞–π –≤ —Å–µ–±–µ –±–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç—å.",
    "–ù–µ –±–æ–π—Å—è –º–µ—á—Ç–∞—Ç—å –∏ —Å—Ç–∞–≤–∏—Ç—å –∞–º–±–∏—Ü–∏–æ–∑–Ω—ã–µ —Ü–µ–ª–∏.",
    "–£–≤–∞–∂–∞–π —á—É–∂–æ–µ –º–Ω–µ–Ω–∏–µ, –¥–∞–∂–µ –µ—Å–ª–∏ –Ω–µ —Å–æ–≥–ª–∞—Å–µ–Ω.",
    "–ò–Ω–≤–µ—Å—Ç–∏—Ä—É–π –≤—Ä–µ–º—è –≤ —Å–∞–º–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ.",
    "–ù–µ –∑–∞–±—ã–≤–∞–π —Ä–∞–¥–æ–≤–∞—Ç—å—Å—è —Å–≤–æ–∏–º –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è–º.",
    "–ë—É–¥—å –≥–æ—Ç–æ–≤ –∫ –ø–µ—Ä–µ–º–µ–Ω–∞–º –∏ –∏—Å–ø–æ–ª—å–∑—É–π –∏—Ö –≤ —Å–≤–æ—é –ø–æ–ª—å–∑—É.",
    "–£—á–∏—Å—å –ø—Ä–æ—â–∞—Ç—å –∏ –æ—Ç–ø—É—Å–∫–∞—Ç—å –æ–±–∏–¥—ã.",
    "–ù–µ –ø–µ—Ä–µ–≥—Ä—É–∂–∞–π —Å–µ–±—è –æ–±—è–∑–∞–Ω–Ω–æ—Å—Ç—è–º–∏ ‚Äî –∑–Ω–∞–π —Å–≤–æ–∏ –≥—Ä–∞–Ω–∏—Ü—ã.",
    "–°–ª–µ–¥–∏ –∑–∞ —Ç–µ–º, –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑—É–µ—à—å —Å–≤–æ–µ –≤—Ä–µ–º—è.",
    "–ù–µ –±–æ–π—Å—è –ø—Ä–∏–∑–Ω–∞–≤–∞—Ç—å —Å–≤–æ–∏ –æ—à–∏–±–∫–∏.",
    "–°—Ç—Ä–µ–º–∏—Å—å –∫ –±–∞–ª–∞–Ω—Å—É –º–µ–∂–¥—É —Ä–∞–±–æ—Ç–æ–π –∏ –ª–∏—á–Ω–æ–π –∂–∏–∑–Ω—å—é.",
    "–ù–µ –∑–∞—Ü–∏–∫–ª–∏–≤–∞–π—Å—è –Ω–∞ –Ω–µ—É–¥–∞—á–∞—Ö ‚Äî –ø—Ä–æ–¥–æ–ª–∂–∞–π –¥–≤–∏–≥–∞—Ç—å—Å—è –≤–ø–µ—Ä–µ–¥.",
    "–ù–µ –∑–∞–±—ã–≤–∞–π –±–ª–∞–≥–æ–¥–∞—Ä–∏—Ç—å –ª—é–¥–µ–π –∑–∞ –∏—Ö –ø–æ–º–æ—â—å.",
    "–£—á–∏—Å—å –ø—Ä–∏–Ω–∏–º–∞—Ç—å —Å–µ–±—è —Ç–∞–∫–∏–º, –∫–∞–∫–æ–π —Ç—ã –µ—Å—Ç—å.",
    "–î–µ–ª–∏—Å—å —Å–≤–æ–∏–º–∏ –∑–Ω–∞–Ω–∏—è–º–∏ —Å –¥—Ä—É–≥–∏–º–∏.",
    "–ë—É–¥—å –Ω–∞—Å—Ç–æ–π—á–∏–≤—ã–º –≤ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ —Å–≤–æ–∏—Ö —Ü–µ–ª–µ–π."
];
const getSelectedCurrencyRates = async (chatId, username) => {
    try {
        const response = await axios.get(API_URL);
        const rates = response.data;
        const selectedCurrencies = ['USD', 'EUR', 'RUB', 'CAD', 'GBP', 'TRY', 'JPY', 'AED', 'KZT'];
        const filteredRates = rates.filter(rate => selectedCurrencies.includes(rate.Ccy));

        if (filteredRates.length > 0) {
            let message = `üí± –ö—É—Ä—Å—ã –Ω—É–∂–Ω—ã—Ö –≤–∞–º –≤–∞–ª—é—Ç —É–≤–∞–∂–∞–µ–º—ã–π @${username}\n\n`;
            filteredRates.forEach(rate => {
                message += `1 ${rate.Ccy} = ${rate.Rate} UZS\n`;
            });
            bot.sendMessage(chatId, message);
        } else {
            bot.sendMessage(chatId, '–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –≤–∞–ª—é—Ç—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã.');
        }
    } catch (error) {
        bot.sendMessage(chatId, '–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.');
        console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö:', error.message);
    }
};
const formatDate = (unixTimestamp) => {
    const date = new Date(unixTimestamp * 1000);
    return date.toISOString();
};
const startGame = async (chatId) => {
    await bot.sendMessage(chatId, '–°–µ–π—á–∞—Å —è –∑–∞–≥–∞–¥–∞—é —Ü–∏—Ñ—Ä—É –æ—Ç 0 –¥–æ 9, –∞ —Ç—ã –¥–æ–ª–∂–µ–Ω —É–≥–∞–¥–∞—Ç—å')
    const randomNumber = Math.floor(Math.random() * 10)
    chats[chatId] = randomNumber;
    await bot.sendMessage(chatId, '–û—Ç–≥–∞–¥—ã–≤–∞–π ü•π', gameOptions)

    setTimeout(() => {
        if (chats[chatId]) {
            delete chats[chatId];
            console.log(`–î–∞–Ω–Ω—ã–µ –¥–ª—è —á–∞—Ç–∞ ${chatId} —É–¥–∞–ª–µ–Ω—ã –∏–∑-–∑–∞ –±–µ–∑–¥–µ–π—Å—Ç–≤–∏—è.`);
        }
    }, 5 * 60 * 1000);
}

const getRandomWish = () => {
    return wishes[Math.floor(Math.random() * wishes.length)];
};
const getRandomRule = () => {
    return rules[Math.floor(Math.random() * rules.length)];
};
const start = async () => {
    try {
        await sequelize.authenticate()
        await sequelize.sync()
    } catch (e) {
        console.log("–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–¥ —Å–ª–æ–º–∞–ª–æ—Å—å");
    }
    bot.setMyCommands([
        { command: '/start', description: '–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ' },
        { command: '/info', description: '–ü–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ' },
        { command: '/exchange', description: '–ö—É—Ä—Å –¥–µ–Ω–µ–≥' }
    ])
    bot.on('message', async msg => {
        console.log(msg)
        const text = msg.text;
        const chatId = msg.chat.id;
        const messageId = msg.message_id;
        const isBot = msg.from.is_bot;
        const username = msg.from.username || msg.from.first_name;
        const isPremium = msg.from.is_premium || false;
        const requestDate = formatDate(msg.date);
        try {
            await UserModel.upsert({
                user_id: msg.from.id,
                username: msg.from.username || null,
                first_name: msg.from.first_name || null,
                last_name: msg.from.last_name || null,
                language_code: msg.from.language_code || null,
                chat_id: chatId,
                is_premium: isPremium,
                message_id: messageId,
                request_date: requestDate,
                text: text || null,
                is_bot: isBot,
            });
        }
        catch (error) {
            console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:', error.message);
        }
        const formattedDate = formatDate(msg.date);
        console.log(`–ó–∞–ø—Ä–æ—Å –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: ${msg.from.first_name} (@${msg.from.username})`);
        console.log(`–î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è –∑–∞–ø—Ä–æ—Å–∞: ${formattedDate}`);
        if (text === '/start') {
            await bot.sendSticker(chatId, `https://t.me/sssassssssasas/1429`)
            return bot.sendMessage(chatId, `–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –º–æ–π —Ç–µ–ª–µ–≥—Ä–∞–º –±–æ—Ç ü´†`, mainMenu)
        }
        if (text === '/info') {
            if (msg.from.username) {
                await bot.sendMessage(chatId, `–¢–µ–±—è –∑–æ–≤—É—Ç ${msg.from.first_name}`);
                await bot.sendMessage(chatId, `–ù–∏–∫–Ω–µ–π–º: @${msg.from.username}`);
            } else {
                await bot.sendMessage(chatId, `–¢–µ–±—è –∑–æ–≤—É—Ç ${msg.from.first_name}`);
                return bot.sendMessage(chatId, '–£ —Ç–µ–±—è –Ω–∏–∫–Ω–µ–π–º–∞ –Ω–µ—Ç.');
            }
        }
        if (text === '/exchange') {
            return getSelectedCurrencyRates(chatId, username);
        }
        if (text === '–£–≥–∞–¥–∞–π —Ü–∏—Ñ—Ä—É üé≤') {
            return startGame(chatId);
        }
        if (text === '–ö—É—Ä—Å—ã –≤–∞–ª—é—Ç üí∏') {
            return getSelectedCurrencyRates(chatId, username);
        }
        if (text === '–ü–æ—Å–ª–∞–Ω–∏–µ üíå') {
            const randomWish = getRandomWish();
            return bot.sendMessage(chatId, randomWish);
        }
        if (text === 'Rules üìú') {
            const randomRule = getRandomRule();
            return bot.sendMessage(chatId, randomRule);
        }
    })
    bot.on('callback_query', async callbackQuery => {
        const { data, message } = callbackQuery;
        const chatId = message.chat.id;
        if (data === '/exchange') {
            return getSelectedCurrencyRates(chatId, message.from.username);
        }
        if (data === '/again') {
            return startGame(chatId);
        }
        if (data == chats[chatId]) {
            await bot.sendSticker(chatId, `https://t.me/sssassssssasas/1430`);
            await bot.sendMessage(chatId, `–ü–æ–∑–¥—Ä–∞–≤–ª—è—é, —Ç—ã –æ—Ç–≥–∞–¥–∞–ª —Ü–∏—Ñ—Ä—É ${chats[chatId]}`, againOptions);
        } else {
            await bot.sendMessage(chatId, `–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, —Ç—ã –Ω–µ —É–≥–∞–¥–∞–ª. –ë–æ—Ç –∑–∞–≥–∞–¥–∞–ª —Ü–∏—Ñ—Ä—É ${chats[chatId]}`, againOptions);
        }
        delete chats[chatId];
    });
}
start()

